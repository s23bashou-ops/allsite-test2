<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>股市分析儀表板</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.development.js"></script>
    
    <!-- Prop-Types -->
    <script src="https://unpkg.com/prop-types/prop-types.min.js"></script>

    <!-- Recharts -->
    <script src="https://unpkg.com/recharts@2.12.0/umd/Recharts.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Markdown Parser for Chat -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <style>
        body {
            background-color: #f8fafc;
            color: #0f172a;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(15, 23, 42, 0.1);
            border-radius: 12px;
        }
        /* Scrollbar customization */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5f5; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #a5b4fc; }
        
        .fade-in { animation: fadeIn 0.5s ease-in; }
        .slide-up { animation: slideUp 0.3s ease-out; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* Chat styles */
        .chat-bubble-user {
            background: #2563eb;
            color: white;
            border-radius: 12px 12px 0 12px;
        }
        .chat-bubble-ai {
            background: #e5e7eb;
            color: #111827;
            border-radius: 12px 12px 12px 0;
        }
        .typing-dot {
            animation: typing 1.4s infinite ease-in-out both;
        }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
    </style>
</head>
<body>

<div id="root">
    <div style="height: 100vh; display: flex; justify-content: center; align-items: center; flex-direction: column;">
        <h2 style="color: white; font-size: 1.5rem;">系統載入中...</h2>
    </div>
</div>

<script type="text/babel">
    const { useState, useEffect, useRef } = React;
    const RechartsObj = window.Recharts || {};
    const { LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, Cell } = RechartsObj;

    // --- 設定區 (Configuration) ---
    // 請將您的 API Keys 填入此處
    const CONFIG = {
        GEMINI_API_KEY: "AIzaSyD61GZb1qa9_pFEjoU_2GxAnD9ZmH6zSVA", // 必填：用於分析與聊天
        JINA_API_KEY: "jina_d9fc3cb689f545fb9cd81f2301508417kjelTyrF7Og8VwdzG5O9kQ9nB-z8"    // 選填：若有 Jina Key 可填入，否則留空
    };
    
    const App = () => {
        // Main App State
        const [searchQuery, setSearchQuery] = useState("台積電");
        const [isLoading, setIsLoading] = useState(false);
        const [logs, setLogs] = useState([]);
        const [analysisData, setAnalysisData] = useState(null);
        const [errorMsg, setErrorMsg] = useState("");
        const [rawContext, setRawContext] = useState(""); // 儲存 Jina 抓到的原始文字供聊天使用

        // Chat State
        const [isChatOpen, setIsChatOpen] = useState(false);
        const [chatInput, setChatInput] = useState("");
        const [isChatLoading, setIsChatLoading] = useState(false);
        const [messages, setMessages] = useState([
            { role: 'assistant', content: '您好！我是您的投資助手。搜尋分析完成後，您可以問我更多細節。' }
        ]);
        const chatEndRef = useRef(null);

        // Auto-scroll chat
        useEffect(() => {
            chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });
        }, [messages, isChatOpen]);

        // 預設/範例資料
        const dummyData = {
            sentiment_trend: [
                { time: '09:00', score: 50 }, { time: '10:00', score: 55 }, 
                { time: '11:00', score: 40 }, { time: '12:00', score: 65 }, 
                { time: '13:00', score: 60 }
            ],
            related_keywords: [
                { name: '半導體', value: 80 }, { name: '資本支出', value: 65 },
                { name: '營收', value: 50 }, { name: '外資', value: 45 }
            ],
            news_items: [
                { title: "等待分析結果...", summary: "請輸入關鍵字並點擊開始分析。", sentiment: "neutral" }
            ],
            market_summary: "尚未開始分析"
        };

        const addLog = (message, type = 'info') => {
            const timestamp = new Date().toLocaleTimeString();
            setLogs(prev => [`[${timestamp}] ${message}`, ...prev]);
        };

        // --- 核心邏輯：Jina 搜尋 + Gemini 分析 ---
        const fetchAnalysis = async () => {
            if (!CONFIG.GEMINI_API_KEY) {
                setErrorMsg("請先在程式碼中的 CONFIG 變數填入 Gemini API Key");
                return;
            }

            setIsLoading(true);
            setErrorMsg("");
            setLogs([]);
            addLog(`啟動任務：分析關鍵字「${searchQuery}」`);

            try {
                // 步驟 1: 透過 Jina Search 獲取資料
                addLog("正在透過 Jina AI 檢索經濟日報...", 'info');
                
                const jinaQuery = `site:tw.stock.yahoo.com ${searchQuery}`;
                const jinaUrl = `https://s.jina.ai/${encodeURIComponent(jinaQuery)}`;
                
                const jinaHeaders = {
                    'Accept': 'application/json',
                    ...(CONFIG.JINA_API_KEY ? { 'Authorization': `Bearer ${CONFIG.JINA_API_KEY}` } : {}) 
                };

                const jinaRes = await fetch(jinaUrl, { headers: jinaHeaders });
                
                if (!jinaRes.ok) {
                    throw new Error(`Jina Search 失敗 (${jinaRes.status})。可能是 CORS 或額度問題。`);
                }

                const jinaText = await jinaRes.text();
                const truncatedText = jinaText.substring(0, 25000); // 限制長度以免爆 token
                setRawContext(truncatedText); // 存入 Context 供聊天使用
                addLog(`Jina 檢索完成，資料長度: ${jinaText.length} 字元`, 'success');

                // 步驟 2: 將 Jina 資料餵給 Gemini 進行結構化分析
                await performGeminiAnalysis(truncatedText);

            } catch (error) {
                console.error(error);
                setErrorMsg(error.message);
                addLog(`流程失敗: ${error.message}`, 'error');
                setIsLoading(false);
            }
        };

        const performGeminiAnalysis = async (contextData) => {
            addLog(`使用 Gemini 進行數據解讀...`, 'info');

            try {
                const prompt = `
                    你是一位專業的金融分析師。以下是透過搜尋引擎 (Jina AI) 抓取到的關於「${searchQuery}」的最新股市資料。
                    
                    === 搜尋資料開始 ===
                    ${contextData} 
                    === 搜尋資料結束 ===

                    任務：
                    1. 根據上述資料，分析市場對「${searchQuery}」的最新看法。
                    2. 提取情緒趨勢、熱門關鍵字與新聞摘要。
                    
                    請嚴格回傳一個純 JSON 物件 (不要 Markdown)，格式如下：
                    {
                        "market_summary": "一句話總結市場氣氛",
                        "sentiment_trend": [
                            {"time": "近期趨勢1", "score": 40},
                            {"time": "近期趨勢2", "score": 60},
                            {"time": "近期趨勢3", "score": 75},
                            {"time": "最新", "score": 85}
                        ],
                        "related_keywords": [
                            {"name": "關鍵字1", "value": 80},
                            {"name": "關鍵字2", "value": 60}
                        ],
                        "news_items": [
                            {"title": "新聞標題", "summary": "摘要", "sentiment": "positive/negative/neutral"}
                        ]
                    }
                `;

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${CONFIG.GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        generationConfig: {
                            temperature: 0.2, 
                            responseMimeType: "application/json"
                        }
                    })
                });

                if (!response.ok) {
                    const errText = await response.text();
                    throw new Error(`Gemini API Error: ${response.status} - ${errText}`);
                }

                const data = await response.json();
                
                if (data.candidates && data.candidates[0].content) {
                    const jsonText = data.candidates[0].content.parts[0].text;
                    const parsedData = JSON.parse(jsonText);
                    setAnalysisData(parsedData);
                    addLog("Gemini 分析完成！", 'success');
                    
                    // 主動推播一條訊息到聊天室
                    setMessages(prev => [...prev, { 
                        role: 'assistant', 
                        content: `分析完成！關於「${searchQuery}」，目前市場氣氛為：${parsedData.market_summary}。您可以問我更多細節！` 
                    }]);
                    setIsChatOpen(true); // 自動打開聊天室

                    setIsLoading(false);
                } else {
                    throw new Error("Gemini 回傳無內容");
                }

            } catch (error) {
                addLog(`分析失敗: ${error.message}`, 'error');
                setIsLoading(false);
            }
        };

        // --- 聊天功能 ---
        const handleChatSend = async () => {
            if (!chatInput.trim() || isChatLoading) return;
            if (!CONFIG.GEMINI_API_KEY) {
                setMessages(prev => [...prev, { role: 'assistant', content: '錯誤：請先設定 API Key' }]);
                return;
            }

            const userMsg = chatInput;
            setChatInput("");
            setMessages(prev => [...prev, { role: 'user', content: userMsg }]);
            setIsChatLoading(true);

            try {
                // 建構聊天上下文
                const contextPrompt = rawContext 
                    ? `以下是目前分析的股市相關資料，請以此為基礎回答使用者問題：\n=== 資料內容 ===\n${rawContext}\n=== 資料結束 ===\n`
                    : "目前尚未有分析資料，請告知使用者先進行搜尋。";

                const history = messages.map(m => ({
                    role: m.role === 'user' ? 'user' : 'model',
                    parts: [{ text: m.content }]
                }));

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${CONFIG.GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [
                            { role: 'user', parts: [{ text: `系統指令：你是一個幫助使用者解讀股市的助手。${contextPrompt}` }] }, // System Prompt trick for simple API
                            ...history,
                            { role: 'user', parts: [{ text: userMsg }] }
                        ]
                    })
                });

                const data = await response.json();
                const reply = data.candidates[0].content.parts[0].text;

                setMessages(prev => [...prev, { role: 'assistant', content: reply }]);

            } catch (error) {
                setMessages(prev => [...prev, { role: 'assistant', content: `發生錯誤: ${error.message}` }]);
            } finally {
                setIsChatLoading(false);
            }
        };

        // Render Data
        const currentData = analysisData || dummyData;
        const chartData = currentData.sentiment_trend || dummyData.sentiment_trend;
        const barData = currentData.related_keywords || dummyData.related_keywords;
        const newsList = currentData.news_items || dummyData.news_items;

        return (
            <div className="min-h-screen p-6 pb-20 fade-in relative">
                {/* Header */}
                <header className="mb-8 flex flex-col md:flex-row justify-between items-center gap-4">
                    <div>
                        <h1 className="text-3xl font-bold text-blue-600 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
                            奇摩股市實時分析
                        </h1>
                        <p className="text-slate-600 text-sm mt-1 flex items-center gap-1">
                            <span></span>
                            <span className="bg-indigo-900/10 text-indigo-700 px-1 rounded text-xs"></span>
                        </p>
                    </div>
                    
                    {/* API Status Indicator (Hidden Input) */}
                    <div className="flex items-center gap-2">
                        <div className={`h-3 w-3 rounded-full ${CONFIG.GEMINI_API_KEY ? 'bg-green-500' : 'bg-red-500 animate-pulse'}`}></div>
                        <span className="text-xs text-slate-600">
                            {CONFIG.GEMINI_API_KEY ? 'API Ready' : 'API Key Missing (Check Code)'}
                        </span>
                    </div>
                </header>

                {/* Search Bar */}
                <div className="flex gap-4 mb-8">
                    <input 
                        type="text" 
                        value={searchQuery}
                        onChange={(e) => setSearchQuery(e.target.value)}
                        placeholder="輸入關鍵字 (例: 台積電, AI, 航運)..."
                        className="flex-1 bg-white border border-slate-300 rounded-lg px-6 py-3 text-lg text-slate-800 focus:outline-none focus:border-blue-500 shadow"
                        onKeyDown={(e) => e.key === 'Enter' && fetchAnalysis()}
                    />
                    <button 
                        onClick={fetchAnalysis}
                        disabled={isLoading}
                        className={`px-8 py-3 rounded-lg font-bold shadow transition-all flex items-center gap-2 ${isLoading ? 'bg-slate-300 cursor-not-allowed text-slate-700' : 'bg-blue-600 hover:bg-blue-500 text-white'}`}
                    >
                        {isLoading ? (
                            <span className="flex items-center gap-2">
                                <svg className="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle><path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                                分析中...
                            </span>
                        ) : (
                            '開始分析'
                        )}
                    </button>
                </div>

                {errorMsg && (
                    <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6">
                        {errorMsg}
                    </div>
                )}

                {/* Main Dashboard Grid */}
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                    {/* Sentiment Chart */}
                    <div className="glass-panel p-6 lg:col-span-2">
                        <h3 className="text-xl font-semibold mb-4 text-emerald-600 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>
                            市場情緒趨勢
                        </h3>
                        <div className="h-64 w-full">
                            <ResponsiveContainer width="100%" height="100%">
                                <LineChart data={chartData}>
                                    <CartesianGrid strokeDasharray="3 3" stroke="#cbd5e1" />
                                    <XAxis dataKey="time" stroke="#334155" />
                                    <YAxis stroke="#334155" domain={[0, 100]} />
                                    <Tooltip contentStyle={{ backgroundColor: '#ffffff', borderColor: '#cbd5e1', color: '#0f172a' }} />
                                    <Legend />
                                    <Line type="monotone" dataKey="score" name="情緒指數" stroke="#3b82f6" strokeWidth={3} dot={{ r: 4, fill: '#3b82f6' }} />
                                </LineChart>
                            </ResponsiveContainer>
                        </div>
                    </div>

                    {/* Keywords */}
                    <div className="glass-panel p-6">
                        <h3 className="text-xl font-semibold mb-4 text-purple-600 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path></svg>
                            關鍵字熱度
                        </h3>
                        <div className="h-64 w-full">
                            <ResponsiveContainer width="100%" height="100%">
                                <BarChart data={barData} layout="vertical">
                                    <CartesianGrid strokeDasharray="3 3" horizontal={false} stroke="#cbd5e1" />
                                    <XAxis type="number" hide />
                                    <YAxis dataKey="name" type="category" width={80} stroke="#334155" />
                                    <Tooltip cursor={{fill: '#e2e8f0'}} contentStyle={{ backgroundColor: '#ffffff', borderColor: '#cbd5e1' }} />
                                    <Bar dataKey="value" name="關注度" fill="#8b5cf6" radius={[0, 4, 4, 0]}>
                                        {barData.map((entry, index) => (
                                            <Cell key={`cell-${index}`} fill={['#8b5cf6', '#a78bfa', '#c4b5fd', '#ddd6fe'][index % 4]} />
                                        ))}
                                    </Bar>
                                </BarChart>
                            </ResponsiveContainer>
                        </div>
                    </div>
                </div>

                {/* News & Logs */}
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div className="glass-panel p-6 lg:col-span-2">
                        <h3 className="text-xl font-semibold mb-4 text-blue-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"></path><path d="M18 14h-8"></path><path d="M15 18h-5"></path><path d="M10 6h8v4h-8V6Z"></path></svg>
                            精選快訊摘要
                        </h3>
                        <div className="space-y-4">
                            {analysisData && (
                                <div className="bg-blue-50 border-l-4 border-blue-500 p-4 rounded mb-4">
                                    <span className="font-bold text-blue-700">總結：</span>
                                    <span className="text-slate-700 ml-2">{analysisData.market_summary}</span>
                                </div>
                            )}
                            {newsList.map((news, idx) => (
                                <div key={idx} className="bg-white p-4 rounded-lg border border-slate-200">
                                    <div className="flex justify-between items-start mb-2">
                                        <h4 className="font-bold text-lg text-slate-900">{news.title}</h4>
                                        <span className={`px-2 py-1 rounded text-xs font-bold uppercase ${
                                            news.sentiment === 'positive' ? 'bg-green-100 text-green-700' : 
                                            news.sentiment === 'negative' ? 'bg-red-100 text-red-700' : 'bg-slate-100 text-slate-700'
                                        }`}>{news.sentiment}</span>
                                    </div>
                                    <p className="text-slate-600 text-sm">{news.summary}</p>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="glass-panel p-6 flex flex-col h-96">
                        <h3 className="text-xl font-semibold mb-4 text-slate-600 flex items-center gap-2">
                            系統日誌
                        </h3>
                        <div className="flex-1 overflow-y-auto bg-slate-50 rounded p-4 font-mono text-xs space-y-2 border border-slate-200">
                            {logs.map((log, idx) => (
                                <div key={idx} className={`border-l-2 pl-2 ${
                                    log.includes('失敗') || log.includes('錯誤') ? 'border-red-500 text-red-700' : 
                                    log.includes('成功') ? 'border-green-500 text-green-700' : 'border-blue-500 text-blue-700'
                                }`}>{log}</div>
                            ))}
                        </div>
                    </div>
                </div>

                {/* Floating Chat Button */}
                <button 
                    onClick={() => setIsChatOpen(!isChatOpen)}
                    className="fixed bottom-6 right-6 w-14 h-14 bg-blue-600 hover:bg-blue-500 rounded-full shadow-2xl flex items-center justify-center transition-all hover:scale-110 z-50 border border-blue-400"
                >
                    {isChatOpen ? (
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    ) : (
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                    )}
                </button>

                {/* Chat Window */}
                {isChatOpen && (
                    <div className="fixed bottom-24 right-6 w-80 md:w-96 h-[500px] glass-panel flex flex-col shadow-2xl z-40 slide-up border border-slate-200">
                        {/* Chat Header */}
                        <div className="p-4 border-b border-slate-200 bg-white/70 rounded-t-xl flex justify-between items-center">
                            <h3 className="font-bold text-blue-700 flex items-center gap-2">
                                <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                AI 投資顧問
                            </h3>
                            <button onClick={() => setMessages([])} className="text-xs text-slate-600 hover:text-slate-900" title="清除對話">
                                清除
                            </button>
                        </div>

                        {/* Chat Messages */}
                        <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50">
                            {messages.map((msg, idx) => (
                                <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                    <div className={`max-w-[85%] p-3 text-sm ${msg.role === 'user' ? 'chat-bubble-user' : 'chat-bubble-ai'}`}>
                                        <div dangerouslySetInnerHTML={{ __html: marked.parse(msg.content) }} />
                                    </div>
                                </div>
                            ))}
                            {isChatLoading && (
                                <div className="flex justify-start">
                                    <div className="bg-white border border-slate-200 p-3 rounded-xl rounded-tl-none flex gap-1">
                                        <div className="w-2 h-2 bg-slate-400 rounded-full typing-dot"></div>
                                        <div className="w-2 h-2 bg-slate-400 rounded-full typing-dot"></div>
                                        <div className="w-2 h-2 bg-slate-400 rounded-full typing-dot"></div>
                                    </div>
                                </div>
                            )}
                            <div ref={chatEndRef} />
                        </div>

                        {/* Chat Input */}
                        <div className="p-3 border-t border-slate-200 bg-white/70 rounded-b-xl">
                            <div className="flex gap-2">
                                <input 
                                    type="text" 
                                    value={chatInput}
                                    onChange={(e) => setChatInput(e.target.value)}
                                    onKeyDown={(e) => e.key === 'Enter' && handleChatSend()}
                                    placeholder="問問細節..."
                                    className="flex-1 bg-white border border-slate-300 rounded px-3 py-2 text-sm text-slate-800 focus:outline-none focus:border-blue-500"
                                />
                                <button 
                                    onClick={handleChatSend}
                                    disabled={isChatLoading}
                                    className="bg-blue-600 hover:bg-blue-500 text-white p-2 rounded transition-colors disabled:bg-slate-300 disabled:text-slate-600"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                )}

            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>

</body>
</html>
